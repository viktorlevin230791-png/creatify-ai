<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creatify AI</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:Inter,sans-serif;
background:radial-gradient(circle at top,#6a5cff,#3b2fa3);
color:#fff;
min-height:100vh
}
.app{
max-width:430px;
margin:0 auto;
padding:24px 20px 120px
}
.hidden{display:none}

h1{text-align:center}

.card{
background:rgba(255,255,255,.12);
border-radius:18px;
padding:18px;
margin-bottom:16px;
backdrop-filter:blur(10px)
}

button{
width:100%;
padding:16px;
border-radius:14px;
border:none;
font-weight:600;
cursor:pointer;
margin-top:14px
}
.primary{background:#fff;color:#3b2fa3}

select,textarea{
width:100%;
padding:14px;
border-radius:12px;
border:none;
margin-top:10px;
font-family:Inter,sans-serif
}

.price{margin-top:8px;font-size:14px;opacity:.9}

/* DRAG & DROP */
.drop-zone{
margin-top:12px;
border:2px dashed rgba(255,255,255,.4);
border-radius:16px;
padding:20px;
text-align:center;
transition:.2s;
cursor:pointer;
background:rgba(255,255,255,.06)
}
.drop-zone.dragover{
background:rgba(255,255,255,.18);
border-color:#fff
}
.drop-title{
font-weight:600;
margin-bottom:6px
}
.drop-sub{
font-size:13px;
opacity:.85
}
.files-list{
margin-top:10px;
font-size:13px;
opacity:.9
}
.files-list div{
margin-top:4px;
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis
}

.bottom-nav{
position:fixed;
bottom:0;
left:0;
right:0;
background:rgba(30,25,90,.95);
backdrop-filter:blur(10px)
}
.bottom-inner{
max-width:430px;
margin:0 auto;
display:grid;
grid-template-columns:repeat(5,1fr);
gap:8px;
padding:10px
}
.nav-btn{
background:rgba(255,255,255,.14);
border-radius:14px;
padding:12px;
font-size:12px;
text-align:center;
cursor:pointer
}
.nav-btn.active{
background:#fff;
color:#3b2fa3
}
</style>
</head>

<body>
<div class="app">

<!-- HOME -->
<div id="home">
<h1>Creatify AI</h1>
<div class="card">
AI-—Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –ø–æ–¥ –∑–∞–∫–∞–∑<br>
–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars ‚≠ê
</div>
</div>

<!-- ORDER -->
<div id="order" class="hidden">
<div class="card">
<h2>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</h2>

<select id="type" onchange="updatePrice()">
<option value="">–§–æ—Ä–º–∞—Ç</option>
<option value="photo">–§–æ—Ç–æ</option>
<option value="video">–í–∏–¥–µ–æ</option>
</select>

<select id="level" onchange="updatePrice()">
<option value="">–°–ª–æ–∂–Ω–æ—Å—Ç—å</option>
<option value="easy">–õ—ë–≥–∫–∞—è</option>
<option value="medium">–°—Ä–µ–¥–Ω—è—è</option>
<option value="hard">–°–ª–æ–∂–Ω–∞—è</option>
</select>

<div class="price" id="price">–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚Äî</div>

<textarea id="desc" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É"></textarea>

<!-- DRAG & DROP -->
<input type="file" id="fileInput" multiple class="hidden">

<div class="drop-zone" id="dropZone">
<div class="drop-title">üìé –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</div>
<div class="drop-sub">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
</div>

<div class="files-list" id="filesList"></div>

<button class="primary" onclick="sendOrder()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>
</div>
</div>

<!-- WALLET -->
<div id="wallet" class="hidden">
<div class="card">
<h2>–ö–æ—à–µ–ª—ë–∫</h2>
<p>–ë–∞–ª–∞–Ω—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Stars</p>
</div>
</div>

<!-- ORDERS -->
<div id="orders" class="hidden">
<div class="card">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
</div>

<!-- EXAMPLES -->
<div id="examples" class="hidden">
<div class="card">–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç</div>
</div>

</div>

<!-- NAV -->
<div class="bottom-nav">
<div class="bottom-inner">
<div class="nav-btn active" onclick="nav('home',this)">–ì–ª–∞–≤–Ω–∞—è</div>
<div class="nav-btn" onclick="nav('order',this)">–ó–∞–∫–∞–∑–∞—Ç—å</div>
<div class="nav-btn" onclick="nav('orders',this)">–ó–∞–∫–∞–∑—ã</div>
<div class="nav-btn" onclick="nav('wallet',this)">–ö–æ—à–µ–ª—ë–∫</div>
<div class="nav-btn" onclick="nav('examples',this)">–ü—Ä–∏–º–µ—Ä—ã</div>
</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const prices = {
photo:{easy:5,medium:15,hard:25},
video:{easy:15,medium:25,hard:50}
};

let selectedFiles = [];

function nav(id, el){
document.querySelectorAll('.app > div').forEach(d=>d.classList.add('hidden'));
document.getElementById(id).classList.remove('hidden');
document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
el.classList.add('active');
}

function updatePrice(){
const t=type.value,l=level.value;
price.innerText=t&&l?`–°—Ç–æ–∏–º–æ—Å—Ç—å: ${prices[t][l]} ‚≠ê`:'–°—Ç–æ–∏–º–æ—Å—Ç—å: ‚Äî';
}

/* DRAG & DROP LOGIC */
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const filesList = document.getElementById('filesList');

dropZone.onclick = () => fileInput.click();

dropZone.ondragover = e => {
e.preventDefault();
dropZone.classList.add('dragover');
};

dropZone.ondragleave = () => dropZone.classList.remove('dragover');

dropZone.ondrop = e => {
e.preventDefault();
dropZone.classList.remove('dragover');
handleFiles(e.dataTransfer.files);
};

fileInput.onchange = () => handleFiles(fileInput.files);

function handleFiles(files){
for(const file of files){
selectedFiles.push(file);
}
renderFiles();
}

function renderFiles(){
filesList.innerHTML = '';
selectedFiles.forEach((f,i)=>{
const div=document.createElement('div');
div.innerText=`üìÑ ${f.name}`;
filesList.appendChild(div);
});
}

function sendOrder(){
if(!type.value||!level.value||!desc.value){
tg.showAlert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
return;
}

tg.sendData(JSON.stringify({
action:'create_order',
type:type.value,
level:level.value,
price:prices[type.value][level.value],
description:desc.value,
files_count:selectedFiles.length
}));
}
</script>
</body>
</html>
